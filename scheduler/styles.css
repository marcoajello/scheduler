/* v8.9.1r â€” buttons fixed, color pickers restored, designer kept */
:root { --bg:#0b0d10; --panel:#13161a; --muted:#a0a7b4; --text:#eef2f8; --accent:#5aa0ff; --row:#161a20; --rowAlt:#151821; --border:#232832; --shadow:0 6px 20px rgba(0,0,0,0.35); }
*{box-sizing:border-box;} body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;-webkit-print-color-adjust:exact;print-color-adjust:exact;}
.container{max-width:1150px;margin:24px auto;padding:0 16px;} h1{margin:0 0 12px;font-size:22px;font-weight:700;letter-spacing:.2px;}
.card{background:var(--panel);border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);padding:12px;}
.error-tray{position:fixed;right:16px;bottom:16px;background:#2b1d1d;color:#ffdada;border:1px solid #5a2d2d;padding:10px 12px;border-radius:10px;box-shadow:var(--shadow);max-width:420px;font-size:12px;z-index:99999;}

.meta .row{display:grid;grid-template-columns:1fr auto auto auto;gap:12px;align-items:end;}
.meta .row.compact-meta{display:flex;gap:3px;align-items:flex-end;flex-wrap:nowrap;width:100%;}
.meta .compact-meta label{font-size:8px;font-weight:600;text-transform:uppercase;letter-spacing:0.1px;display:flex;flex-direction:column;gap:1px;min-width:0;flex-shrink:0;justify-content:flex-end;align-items:flex-start;}
.meta .compact-meta label.no-label{margin-top:11px;}
.meta .compact-meta label.title-field-only{margin-top:11px;gap:0;}
.meta .compact-meta .of-label{align-self:flex-end;margin-bottom:4px;font-size:9px;opacity:0.7;flex-shrink:0;padding:0 1px;}
.meta .compact-meta .title-label-left{align-self:flex-end;margin-bottom:4px;font-size:8px;font-weight:600;text-transform:uppercase;letter-spacing:0.1px;color:var(--muted);flex-shrink:0;padding:0 3px;}
.meta .compact-meta input{padding:3px 4px !important;font-size:10px !important;min-width:0;box-sizing:border-box;}
.meta .compact-meta input#metaTitle{width:95px !important;}
.meta .compact-meta input#metaVersion{width:32px !important;}
.meta .compact-meta input#metaDate{width:105px !important;}
.meta .compact-meta input#metaDow{width:90px !important;}
.meta .compact-meta input[type="number"]{width:32px !important;text-align:center;}
.meta label{color:var(--muted);display:flex;flex-direction:column;gap:6px;}
.meta .grow{min: width 300px;} .meta .nowrap{white-space:nowrap;}
.meta input[type="text"],.meta input[type="date"],.meta input[type="number"]{background:#0f1217;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:8px 10px;outline:none;}
.meta .xofy{display:inline-flex;align-items:center;gap:8px;} .metaDisplay{margin-top:10px;color:var(--text);font-weight:600;}

.controls{display:flex;gap:12px;flex-wrap:wrap;align-items:center;background:var(--panel);border:1px solid var(--border);padding:12px;border-radius:12px;box-shadow:var(--shadow);margin-top:16px;}
.controls .grow{flex:1;} label{display:inline-flex;align-items:center;gap:8px;color:var(--muted);}
input[type="time"],input[type="number"],input[type="text"],select,textarea{background:#0f1217;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:8px 10px;outline:none;}
input.duration, input.offset, input.subDur{width:60px;padding:6px 8px;text-align:center;}
input.subOffset{width:60px;padding:6px 8px;text-align:center;border-color:#5a6b7f;background:#0d1015;}
button{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;box-shadow:var(--shadow);} 
button.ghost{background:var(--accent);color:white;border:1px solid var(--accent);} 
button:hover{filter:brightness(1.1);opacity:0.95;}

/* Style Load button label to match other buttons */
.loadBtn {
  display: inline-block;
  background: var(--accent);
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: var(--shadow);
  font-size: 14px;
}
.loadBtn:hover {
  filter: brightness(1.1);
  opacity: 0.95;
}
.loadBtn input[type="file"] {
  display: none;
}

.fgA{display:inline-block;background:#fff;color:#000;padding:0 4px;border-radius:4px;font-weight:800;font-family:ui-sans-serif,system-ui;}

/* Palette */
.palette .pal-wrap{display:grid;gap:10px;} .chips{display:flex;flex-wrap:wrap;gap:8px;}
.chip{width:28px;height:28px;border-radius:7px;border:1px solid #00000030;cursor:pointer;box-shadow:var(--shadow);} .chip.mini{width:18px;height:18px;border-radius:5px;}
.pal-actions{display:flex;gap:10px;align-items:center;} .pal-actions .addcolor{display:inline-flex;align-items:center;gap:6px;color:var(--muted);} .pal-actions input[type="color"]{width:32px;height:32px;padding:0;background:transparent;border:none;}

/* Column manager */
.colpanel .col-wrap{display:grid;gap:8px;} .col-list{display:grid;gap:8px;}
.colRow{display:grid;grid-template-columns:1.3fr 1.1fr auto auto 1fr auto auto auto;gap:8px;align-items:center;background:#11151c;border:1px solid var(--border);border-radius:10px;padding:8px;}
.colRow input.colLabel,.colRow select.colType{background:#0f1217;color:var(--text);border:1px solid var(--border);border-radius:8px;padding:6px 8px;}
.colRow .toggle{color:var(--muted);display:inline-flex;align-items:center;gap:6px;} .colRow .spacer{flex:1;} .col-actions{display:flex;gap:8px;align-items:center;}

/* Table */
.schedule{width:100%;border-collapse:collapse;margin-top:16px;background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden;box-shadow:var(--shadow);}
thead th{text-align:left;font-weight:700;color:var(--muted);background:#141920;padding:10px;border-bottom:1px solid var(--border);user-select:none;}
thead th.fixed-left, thead th.fixed-right{color:transparent;width:28px;}
tbody td{padding:8px 10px;border-bottom:1px solid var(--border);vertical-align:top;}
tbody tr{background:var(--row-bg, var(--row)); color: var(--row-fg, var(--text));}
tbody tr:nth-child(even){background:var(--row-bg, var(--rowAlt));}
tbody tr.call{background:var(--row-bg, var(--row)); color: var(--row-fg, var(--text));}
tbody tr.subheader{background:var(--sub-bg, #1a1f28) !important; color: var(--sub-fg, var(--text));}
tr.subchild{background:var(--subchild-bg, #0f131a) !important; color: var(--subchild-fg, var(--text));}

/* Ensure all child elements inherit row text color */
tbody tr input[type="text"],
tbody tr input[type="time"],
tbody tr input[type="number"],
tbody tr textarea,
tbody tr .tCell,
tbody tr .titleWrap,
tbody tr td {
  color: inherit !important;
}

/* BUT: ALL form controls need white backgrounds and dark text for readability */
tbody tr input[type="text"],
tbody tr input[type="time"], 
tbody tr input[type="number"],
tbody tr textarea,
tbody tr select {
  color: #1a202c !important;
  background: #ffffff !important;
  border: 1px solid #cbd5e0 !important;
}

/* Force in both light and dark mode */
body tbody tr input[type="text"],
body tbody tr input[type="time"],
body tbody tr input[type="number"],
body tbody tr textarea,
body tbody tr select {
  color: #1a202c !important;
  background: #ffffff !important;
  border: 1px solid #cbd5e0 !important;
}

tbody tr.subheader input[type="text"],
tbody tr.subheader input[type="time"],
tbody tr.subheader input[type="number"],
tbody tr.subheader textarea,
tbody tr.subheader .tCell,
tbody tr.subheader td {
  color: var(--sub-fg, var(--text)) !important;
}

tbody tr.subheader input[type="text"],
tbody tr.subheader input[type="time"],
tbody tr.subheader input[type="number"],
tbody tr.subheader textarea,
tbody tr.subheader select {
  color: #1a202c !important;
  background: #ffffff !important;
  border: 1px solid #cbd5e0 !important;
}

tbody tr.subchild input[type="text"],
tbody tr.subchild input[type="time"],
tbody tr.subchild input[type="number"],
tbody tr.subchild textarea,
tbody tr.subchild .tCell,
tbody tr.subchild td {
  color: var(--subchild-fg, var(--text)) !important;
}

tbody tr.subchild input[type="text"],
tbody tr.subchild input[type="time"],
tbody tr.subchild input[type="number"],
tbody tr.subchild textarea,
tbody tr.subchild select {
  color: #1a202c !important;
  background: #ffffff !important;
  border: 1px solid #cbd5e0 !important;
}

/* Ensure dropdown options are always readable */
select option {
  color: #1a202c;
  background: #ffffff;
}

td[data-key="drag"]{width:60px;cursor:grab;text-align:center;font-size:18px;user-select:none;white-space:nowrap;}
td[data-key="drag"] .formatBtn{font-size:12px;padding:2px 4px;margin-left:2px;vertical-align:middle;}
td[data-key="idx"]{width:36px;color: var(--muted);} td.ampm{font-variant-numeric:tabular-nums;width:120px;white-space:nowrap;}
td.actions{width:140px;min-width:140px;max-width:140px;text-align:right;display:flex;gap:6px;justify-content:flex-end;align-items:center;flex-shrink:0;}
td.actions button{margin-left:0;padding:6px 8px;flex-shrink:0;}
th[data-key="actions"]{width:140px;min-width:140px;max-width:140px;}

.row.dragging{opacity:.6;outline:2px dashed var(--accent);} tr.subchild.attached{outline:1px dashed #3a7bff55;}
tr.row.selected{background:var(--accent) !important;opacity:0.7;}
tr.row.selected td{border-color:var(--accent) !important;}
.badge{background:#243041;color:#a9c7ff;padding:2px 6px;border-radius:999px;font-size:11px;font-weight:700;}
.badge-sub{background:#2f2a41;color:#d1c9ff;}
.subControls{display:inline-flex;gap:8px;align-items:center;flex-wrap:wrap;}

/* Upload / Tags */
.uploadBox .u-actions{margin-bottom:6px;display:flex;gap:8px;align-items:center;} .uploadBox .u-grid{display:flex;flex-wrap:wrap;gap:8px;}
.uploadBox{transition:all 0.2s ease;}
.uploadBox.drag-over{background:#1a2330;border:2px dashed var(--accent);border-radius:8px;padding:8px;}
.uploadBox .u-item{position:relative;} .uploadBox .u-del{position:absolute;top:2px;right:2px;background:#00000080;color:#fff;border:none;border-radius:6px;padding:2px 6px;cursor:pointer;}
.uploadBox .u-thumb{width:120px;height:90px;object-fit:cover;border-radius:6px;border:1px solid #00000040;} .uploadBox .u-audio{width:180px;height:28px;}

.tagsBox{display:flex;flex-wrap:wrap;gap:6px;align-items:center;} .tags-pills{display:flex;flex-wrap:wrap;gap:6px;}
.tag-pill{background:#1e2430;color:#d9e2f3;padding:4px 8px;border-radius:999px;border:1px solid #00000040;display:inline-flex;align-items:center;gap:6px;}
.tag-pill .tag-x{background:transparent;color:#9fb4da;border:none;cursor:pointer;}
.tags-input{min-width:120px;background:#0f1217;color:var(--text);border:1px solid var(--border);border-radius:6px;padding:6px 8px;}
.tags-value{display:none;}

/* Popovers (color pickers) */
.popover{position:absolute;z-index:9999;width:280px;background:#0f1217;border:1px solid var(--border);border-radius:10px;padding:10px;box-shadow:var(--shadow);display:none;}
.format-popover{width:320px;max-height:500px;overflow-y:auto;}
.popover.is-open{display:block;}
.pop-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;color:#cfd6e6;}
.pop-head .pop-close{background:transparent;border:1px solid var(--border);color:#9fb4da;border-radius:8px;padding:4px 6px;cursor:pointer;}
.pop-actions{display:flex;gap:8px;align-items:center;margin-top:8px;} .pop-actions input[type="color"]{width:32px;height:32px;padding:0;background:transparent;border:none;}
.pop-actions .apply{background:var(--accent);color:white;border:none;border-radius:8px;padding:6px 10px;} .pop-actions .clear{border:1px solid var(--border);}
.pop-actions .apply-format{background:var(--accent);color:white;border:none;border-radius:8px;padding:8px 16px;font-weight:600;}
.pop-actions .reset-format{border:1px solid var(--border);}

/* Formatting popover sections */
.format-section{margin-bottom:12px;}
.format-label{display:block;color:var(--muted);font-size:11px;font-weight:600;text-transform:uppercase;margin-bottom:6px;}
.format-section select{width:100%;padding:6px 8px;background:#1a1f28;border:1px solid var(--border);border-radius:6px;color:#cfd6e6;font-size:13px;}
.format-buttons{display:flex;gap:4px;}
.format-btn{flex:1;padding:8px;background:#1a1f28;border:1px solid var(--border);border-radius:6px;color:#9fb4da;cursor:pointer;font-size:14px;transition:all 0.2s;}
.format-btn:hover{background:#232a38;border-color:var(--accent);}
.format-btn[data-active="true"]{background:var(--accent);border-color:var(--accent);color:white;}
.color-picker-row{display:flex;gap:8px;align-items:center;margin-bottom:6px;}
.color-picker-row input[type="color"]{width:40px;height:32px;padding:0;background:transparent;border:1px solid var(--border);border-radius:6px;cursor:pointer;}
.color-picker-row .clear-fg, .color-picker-row .clear-bg{padding:6px 10px;font-size:11px;}

/* Color/format buttons */
.colorBtn, .fontBtn, .formatBtn{border:1px solid var(--border); background:transparent; color:var(--muted);}
.fontBtn{font-weight:800;}
.formatBtn{font-size:16px;font-weight:600;}

/* Per-cell formatting */
.custom-cell{position:relative;}
.cell-wrapper{position:relative;display:flex;align-items:flex-start;gap:4px;}
.cell-format-btn{position:absolute;top:2px;right:2px;font-size:11px;padding:2px 4px;opacity:0;transition:opacity 0.2s;z-index:10;}
.custom-cell:hover .cell-format-btn{opacity:1;}
.cell-wrapper textarea{flex:1;min-width:0;}
.colorGroup{display:inline-flex;gap:6px;align-items:center;}
.colorGroup .label{color:var(--muted);}
.colorGroup .sep{width:1px;height:18px;background:#00000040;display:inline-block;border-radius:1px;}

/* Meta display row with format button */
.meta-content-wrapper {
  display: flex;
  gap: 0;
}

.meta-handle-btn {
  flex-shrink: 0;
  width: 32px;
  background: #1a1f28;
  border: none;
  border-right: 1px solid var(--border);
  color: var(--muted);
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: -12px 0 -12px -12px;
  border-radius: 12px 0 0 12px;
  transition: all 0.2s ease;
}

.meta-handle-btn:hover {
  background: #232a36;
  color: var(--accent);
}

.meta-fields {
  flex: 1;
  min-width: 0;
  padding-left: 12px;
}

.meta-display-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.meta-display-row .metaDisplay {
  flex: 1;
}

/* Designer */
.designer .designer-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;gap:8px;}
.designer .designer-bar .left, .designer .designer-bar .right{display:flex;gap:8px;align-items:center;flex-wrap:wrap;}
.designer-canvas-wrap{display:grid;grid-template-columns:1fr 300px;gap:12px;align-items:start;}
.designer-canvas{position:relative;min-height:780px;background:#0f1217;border:1px dashed #3a4252;border-radius:12px;box-shadow:inset 0 0 0 1px #00000040;padding:12px;overflow:hidden;}
.designer-canvas::before{content:"12â€‘col grid";position:absolute;top:8px;right:12px;color:#4b5466;font-size:11px;}
.grid-bg{position:absolute;inset:0;display:grid;grid-template-columns:repeat(12,1fr);gap:8px;pointer-events:none;opacity:.12;}
.grid-bg div{background:#5aa0ff;}
.module{position:absolute;background:#11151c;border:1px solid #2b3241;border-radius:10px;box-shadow:var(--shadow);min-width:120px;min-height:60px;}
.module.selected{outline:2px solid #5aa0ff;}
.module .m-head{display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-bottom:1px solid #232a38;font-weight:700;color:#c9d2e6;}
.module .m-body{padding:8px;max-height:100%;overflow:auto;}
.handle{position:absolute;width:12px;height:12px;background:#5aa0ff;border-radius:2px;right:-6px;bottom:-6px;cursor:nwse-resize;}

.designer-props{background:#0f1217;border:1px solid #2b3241;border-radius:12px;padding:10px;box-shadow:var(--shadow);}
.designer-props h3{margin:0 0 8px 0;font-size:15px;}
.props-body label{display:block;color:#a8b1c2;margin:6px 0;}
.props-body input[type="text"], .props-body input[type="number"], .props-body select, .props-body textarea{width:100%;background:#0b0f15;color:#fff;border:1px solid #2b3241;border-radius:8px;padding:6px 8px;}

/* Gallery */
.gallery{margin-top:16px;}
.gallery h2{margin:0 0 8px 0;font-size:18px;}
.g-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;}
.g-item{background:#11151c;border:1px solid var(--border);border-radius:10px;padding:8px;}
.g-item img,.g-item video{width:100%;height:160px;object-fit:cover;border-radius:8px;border:1px solid #00000040;}

/* Print modifiers */
body.print-compact tbody td{padding:6px 8px;}
body.print-no-grid thead th, body.print-no-grid tbody td{border-color:transparent;}
@media print{
  .controls,.palette,.colpanel,.printpanel,.designer,.foot{display:none!important;}
  .schedule{border:none;box-shadow:none;}
  thead th{background:#222;color:#fff;}
  .col-print-hide{display:none!important;}
  body.print-break-subs tr.subheader{break-before: page;}
  body.print-hide-meta #metaSection{display:none!important;}
  /* Media size switching for table cells */
  body.media-s .uploadBox .u-thumb{width:90px;height:70px;}
  body.media-m .uploadBox .u-thumb{width:140px;height:100px;}
  body.media-l .uploadBox .u-thumb{width:220px;height:160px;}
  /* Gallery */
  #printGallery{display:block!important;}
  body.gallery-s .g-item img, body.gallery-s .g-item video{height:120px;}
  body.gallery-m .g-item img, body.gallery-m .g-item video{height:160px;}
  body.gallery-l .g-item img, body.gallery-l .g-item video{height:220px;}
  /* Designer print */
  .designer-print-root{display:block!important;}
  .dpr-page{page-break-after:always;}
  .dpr-module{border:1px solid #ddd;border-radius:8px;padding:8px;margin:4px;background:white;color:black;}
  .dpr-title{font-weight:700;margin-bottom:6px;}
}


/*== LINE_KILL_FIX_1 ==*/
/* Remove any visible right-edge line on the last cell and neutralize row/drag outlines */
table.schedule tr > th:last-child,
table.schedule tr > td:last-child {
  border-right: 0 !important;
  box-shadow: none !important;
}
/* If any row uses an outline for dragging, hide it to prevent a stray right-edge line */
tr.row.dragging { outline: none !important; }
/* In case a dragover style added an outline/box-shadow on Media cells, neutralize it */
.uploadBox.u-dragover { outline: none !important; box-shadow: none !important; }
/*== /LINE_KILL_FIX_1 ==*/


/*== LINE_KILL_FIX_2 ==*/
tbody td.actions { border-bottom: 0 !important; }
tbody tr:last-child > td { border-bottom: 0 !important; }
/*== /LINE_KILL_FIX_2 ==*/


/* === Column resize & fixed layout === */
table.schedule { table-layout: auto; width: auto;  width: auto;  }
table.schedule th, table.schedule td { box-sizing: border-box; overflow: hidden; text-overflow: ellipsis; }
thead th { position: relative; }
.col-resize-grip{ position:absolute; right:0; top:0; width:8px; height:100%; cursor: col-resize; z-index:2; user-select:none; }

/* === Print cleanup === */
@media print{
  td[data-key="drag"], th[data-key="drag"],
  td[data-key="actions"], th[data-key="actions"], th.fixed-right { display:none !important; }
  .uploadBox .u-actions, .uploadBox .u-del { display:none !important; }
  input, select, textarea, button { background:transparent !important; border:0 !important; box-shadow:none !important; }
  body { background:#fff !important; color:#000 !important; }
  thead th { background:#222 !important; color:#fff !important; }
}
@page { margin: 12mm 12mm 12mm 8mm; }

/* === Hide Report Designer UI (safe) === */
#designerPanel { display:none !important; }
input#psUseDesigner { display:none !important; }


/* === Visible column separators & grips === */
thead th,
tbody td { border-right: 1px solid var(--border); }

/* Don't draw a border on the last header cell (Actions) to avoid double-thick edge */
thead th:last-child,
tbody tr > td:last-child { border-right: none; }

/* Make the grip visibly targetable: a slim bar that darkens on hover */
.col-resize-grip::before{
  content: "";
  position: absolute;
  right: 1px;
  top: 20%;
  bottom: 20%;
  width: 1px;
  background: rgba(0,0,0,0.1);
  pointer-events: none;
}
thead th:hover .col-resize-grip::before{ background: rgba(0,0,0,0.3); }

/* Improve hover target size but keep it narrow */
.col-resize-grip{ width: 6px; right: -1px; }

/* Actions column content should not force column to expand while resizing */
td[data-key="actions"] { white-space: nowrap; overflow: hidden; }
td[data-key="actions"] > * { max-width: 100%; }



/* Horizontal scroll for wide tables */
.schedule-scroll{ overflow: visible; }
.schedule-scroll > table{ border-collapse: separate; border-spacing: 0; }


/* Narrow left margin/padding */
.container{ padding-left: 8px !important; }

.container{ max-width: none !important; }

/* Enforce narrower DUR column */
td[data-col="DUR"], th[data-col="DUR"] {
  max-width: 60px !important;
  width: 60px !important;
}


/* Meta module cleanup */
.meta.card { padding: 16px; }

.meta.card .row:not(.compact-meta) {
  display: grid;
  grid-template-columns: 1.4fr 1fr 1fr 0.8fr; /* Title | Day | Date | Version */
  gap: 16px;
  align-items: end;
}

.meta.card label { display: block; }

.meta.card input[type="text"]:not(.compact-meta input),
.meta.card input[type="date"]:not(.compact-meta input),
.meta.card input[type="number"]:not(.compact-meta input) { width: 100%; }

.meta.card .xofy {
  display: grid;
  grid-template-columns: 1fr auto 1fr; /* X 'of' Y */
  gap: 12px;
  align-items: center;
}

.metaDisplay {
  margin-top: 12px;
  font-weight: 600;
  font-size: 1.1rem;
}

@media (max-width: 900px){
  .meta.card .row:not(.compact-meta) { grid-template-columns: 1fr 1fr; }
}
/* Make meta inputs narrower */
.meta.card input[type="text"]:not(.compact-meta input),
.meta.card input[type="date"]:not(.compact-meta input),
.meta.card input[type="number"]:not(.compact-meta input) {
  width: 100%;
  max-width: 200px;   /* global cap */
}

/* Fine-tune per field - only for non-compact */
.meta.card .row:not(.compact-meta) #metaTitle   { max-width: 320px; }  /* title a bit wider */
.meta.card .row:not(.compact-meta) #metaDow     { max-width: 160px; }
.meta.card .row:not(.compact-meta) #metaDate    { max-width: 160px; }
#metaVersion { max-width: 120px; }

/* Day X / of / Y */
.meta.card .xofy input {
  max-width: 80px;
}
/* Make the Title label a flex row so inputs can sit on one line */
#metaTitle { min-width: 220px; } /* adjust to taste */
label:has(#metaTitle) {
  display: flex;
  gap: 12px;
  align-items: end; /* align bottoms */
}

/* The inline X-of-Y group next to Title */
.inline-xofy {
  display: inline-flex;
  gap: 8px;
  align-items: center;
  white-space: nowrap;
}

.inline-xofy input[type="number"] {
  width: 72px;       /* tighten X/Y */
  max-width: 72px;
}

.inline-xofy .xofy-sep {
  opacity: 0.8;
  font-size: 0.95em;
}

/* Optional: shrink on small screens */
@media (max-width: 900px) {
  label:has(#metaTitle) {
    flex-wrap: wrap; /* allows wrap on phones */
    gap: 8px;
  }
}

/* FINAL OVERRIDE: Ensure compact-meta styles always win */
.meta.card .compact-meta {
  display: flex !important;
  gap: 3px !important;
  flex-wrap: nowrap !important;
  width: 100% !important;
}
.meta.card .compact-meta label {
  font-size: 8px !important;
  gap: 1px !important;
  min-width: 0 !important;
  flex-shrink: 0 !important;
  width: auto !important;
  max-width: none !important;
}
.meta.card .compact-meta input {
  padding: 3px 4px !important;
  font-size: 10px !important;
  border-radius: 6px !important;
}
.meta.card .compact-meta input#metaTitle { width: 95px !important; max-width: 95px !important; }
.meta.card .compact-meta input#metaVersion { width: 32px !important; max-width: 32px !important; }
.meta.card .compact-meta input#metaDate { width: 105px !important; max-width: 105px !important; }
.meta.card .compact-meta input#metaDow { width: 60px !important; max-width: 60px !important; }
.meta.card .compact-meta input[type="number"] { width: 32px !important; max-width: 32px !important; text-align: center !important; }

/* Floating Action Button */
.fab-container { position: fixed; bottom: 24px; left: 24px; z-index: 9999; }
.fab { 
  width: 56px; height: 56px; border-radius: 50%; 
  background: var(--accent); color: white; border: none; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.4); cursor: pointer; 
  transition: all 0.3s ease; display: flex; align-items: center; 
  justify-content: center; font-size: 28px; font-weight: 300;
}
.fab:hover { transform: scale(1.1); box-shadow: 0 6px 16px rgba(0,0,0,0.5); }
.fab.active { transform: rotate(45deg); background: #ff5555; }
.fab-icon-main { transition: transform 0.3s ease; }

.fab-menu { 
  position: absolute; bottom: 70px; left: 0; 
  display: flex; flex-direction: column; gap: 12px; 
  opacity: 0; pointer-events: none; 
  transition: all 0.3s ease; transform: translateY(20px);
}
.fab-menu.active { opacity: 1; pointer-events: all; transform: translateY(0); }

.fab-option { 
  display: flex; align-items: center; justify-content: center;
  background: var(--panel); color: var(--text); 
  border: 1px solid var(--border); border-radius: 28px; 
  padding: 12px 24px; cursor: pointer; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.3); 
  transition: all 0.2s ease; white-space: nowrap;
  font-size: 14px; font-weight: 600;
}
.fab-option:hover { 
  background: var(--accent); border-color: var(--accent); 
  transform: translateX(4px); box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}
.fab-option .fab-label { min-width: 100px; text-align: center; }

/* Hide FAB on print */
@media print { .fab-container { display: none; } }

/* FAB Divider */
.fab-divider {
  height: 1px;
  background: var(--border);
  margin: 4px 0;
  opacity: 0.5;
}

/* Special styling for Add Day option */
.fab-option-special {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-color: #667eea;
  font-weight: 700;
}
.fab-option-special:hover {
  background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  border-color: #764ba2;
}

/* Day Tabs Bar */
.day-tabs-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--bg);
  border-bottom: 2px solid var(--border);
  margin: 0 -1rem;
  padding: 0 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.day-tabs {
  display: flex;
  gap: 8px;
  padding: 12px 0;
  overflow-x: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

.day-tabs::-webkit-scrollbar {
  height: 6px;
}

.day-tabs::-webkit-scrollbar-track {
  background: transparent;
}

.day-tabs::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
}

.day-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--panel);
  border: 2px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  font-weight: 500;
  font-size: 14px;
  color: var(--text);
  user-select: none;
}

.day-tab:hover {
  background: var(--hover);
  border-color: var(--accent);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

.day-tab.active {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
  font-weight: 700;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.day-tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: rgba(0,0,0,0.2);
  color: white;
  font-size: 12px;
  line-height: 1;
  opacity: 0.7;
  transition: all 0.2s ease;
}

.day-tab-close:hover {
  opacity: 1;
  background: rgba(255,255,255,0.3);
  transform: scale(1.1);
}

.day-tab:not(.active) .day-tab-close {
  background: var(--border);
  color: var(--text);
}

/* Additional styles for enhanced report designer */

/* Schedule Preview Table */
.schedule-preview {
  width: 100%;
  font-size: 0.7rem;
  border-collapse: collapse;
  color: #000;
}

.schedule-preview th,
.schedule-preview td {
  border: 1px solid #ddd;
  padding: 2px 4px;
  text-align: left;
}

.schedule-preview th {
  background: #f5f5f5;
  font-weight: 600;
  font-size: 0.65rem;
  text-transform: uppercase;
}

.schedule-preview .sub-child td {
  background: #f9f9f9;
  font-style: italic;
  padding-left: 12px;
}

/* Header preview content */
.preview-header-content {
  text-align: center;
  padding: 10px;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.preview-header-content h1 {
  margin: 0 0 8px 0;
  color: #000;
}

.header-date {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 4px;
}

.header-day {
  font-size: 0.85rem;
  color: #888;
}

/* Print module styles */
.print-module {
  background: white;
  overflow: hidden;
}

/* Column checkbox styling */
.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  cursor: pointer;
  user-select: none;
}

.checkbox-label input[type="checkbox"] {
  cursor: pointer;
}

/* Print preview styles */
.report-preview-root {
  background: #f5f5f5;
}

.report-preview-root .report-page {
  background: white;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  margin: 0 auto;
}

/* Print media query */
@media print {
  .report-preview-root {
    background: white;
    padding: 0;
  }
  
  .report-page {
    box-shadow: none;
    page-break-after: always;
  }
  
  .print-module {
    break-inside: avoid;
  }
}
edia (max-width: 1200px) {
  .designer-workspace {
ule-delete {
  background: transparent;
  border: none;
  color: #e74c3c;
  font-size: 1.2rem;
  line-height: 1;
  cursor: pointer;
  padding: 0 0.25rem;
  transition: all 0.2s ease;
}

.module-delete:hover {
  color: #c0392b;
  transform: scale(1.2);
}

.module-body {
  padding: 0.75rem;
  overflow: hidden;
  height: calc(100% - 40px);
  display: flex;
  align-items: center;
  justify-content: center;
}

.module-resize-handle {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 16px;
  height: 16px;
  background: var(--accent);
  border-radius: 4px 0 0 0;
  cursor: nwse-resize;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.module-element:hover .module-resize-handle,
.module-element.selected .module-resize-handle {
  opacity: 1;
}

/* Module Preview Styles */
.preview-header {
  font-size: 0.9rem;
  color: var(--muted);
  text-align: center;
}

.preview-text {
  font-size: 0.85rem;
  color: var(--text);
  white-space: pre-wrap;
  overflow: auto;
  width: 100%;
  height: 100%;
}

.preview-table,
.preview-block,
.preview-card {
  font-size: 0.85rem;
  color: var(--muted);
  text-align: center;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px dashed var(--border);
  border-radius: 4px;
}

.preview-placeholder {
  font-size: 0.85rem;
  color: var(--muted);
  font-style: italic;
  text-align: center;
}

/* Properties Panel (Right Sidebar) */
.module-properties {
  background: var(--panel);
  border-left: 1px solid var(--border);
  padding: 1rem;
  overflow-y: auto;
}

.module-properties h3 {
  margin: 0 0 1rem 0;
  font-size: 0.9rem;
  text-transform: uppercase;
  color: var(--muted);
}

.properties-content {
  font-size: 0.85rem;
}

.property-group {
  margin-bottom: 1.5rem;
}

.property-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
  font-size: 0.8rem;
  text-transform: uppercase;
  color: var(--muted);
}

.property-group input[type="text"],
.property-group input[type="number"],
.property-group textarea,
.property-group select {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid var(--border);
  border-radius: 4px;
  font-size: 0.85rem;
  background: var(--bg);
  color: var(--text);
}

.property-group textarea {
  resize: vertical;
  font-family: inherit;
}

.property-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.5rem;
}

.property-grid small {
  display: block;
  margin-bottom: 0.25rem;
  font-size: 0.7rem;
  color: var(--muted);
  text-transform: uppercase;
}

.property-grid input {
  width: 100%;
  padding: 0.4rem;
  font-size: 0.8rem;
}

/* Designer Help */
.designer-help {
  margin-top: 1rem;
  padding: 1rem;
  background: var(--panel);
  border-top: 1px solid var(--border);
}

.designer-help details {
  font-size: 0.85rem;
}

.designer-help summary {
  cursor: pointer;
  font-weight: 600;
  padding: 0.5rem 0;
  user-select: none;
}

.designer-help ul {
  margin: 0.5rem 0 0 0;
  padding-left: 1.5rem;
  list-style: disc;
}

.designer-help li {
  margin-bottom: 0.5rem;
  line-height: 1.4;
}

/* Report Preview (For Printing) */
.report-preview-root {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;
  z-index: 10000;
  overflow: auto;
  padding: 2rem;
}

.report-preview-root .report-page {
  margin: 0 auto 2rem auto;
  box-shadow: 0 2px 12px rgba(0,0,0,0.1);
}

/* Print Styles */
@media print {
  .report-preview-root {
    position: static;
    padding: 0;
  }
  
  .report-page {
    box-shadow: none;
    margin: 0;
    page-break-after: always;
  }
  
  .report-page:last-child {
    page-break-after: auto;
  }
  
  .module-header,
  .module-resize-handle {
    display: none !important;
  }
  
  .module-element {
    border: none !important;
    background: transparent !important;
    box-shadow: none !important;
  }
  
  .module-body {
    padding: 0;
    height: 100%;
  }
}

/* Responsive */
@media (max-width: 1400px) {
  .designer-workspace {
    grid-template-columns: 180px 1fr 250px;
  }
}

@m